<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2563eb">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Nova Docs - Editor">
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20w_o%20text.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20w_o%20text.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20w_o%20text.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- SEO Meta Tags -->
    <title>Document Editor - Nova Docs</title>
    <meta name="description" content="Create and edit documents with Nova Docs' powerful editor. Features include real-time collaboration, automatic saving, and rich text formatting.">
    <meta name="keywords" content="document editor, text editor, word processor, Nova Docs">
    <meta name="author" content="xxavvTechnlogies">
    <meta name="robots" content="noindex, nofollow"> <!-- Private page -->

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Document Editor - Nova Docs">
    <meta property="og:description" content="Create and edit documents with Nova Docs' powerful editor. Features include real-time collaboration, automatic saving, and rich text formatting.">
    <meta property="og:image" content="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20social-preview.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Document Editor - Nova Docs">
    <meta property="twitter:description" content="Create and edit documents with Nova Docs' powerful editor. Features include real-time collaboration, automatic saving, and rich text formatting.">
    <meta property="twitter:image" content="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20social-preview.png">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20w_o%20text.png">
    <link rel="apple-touch-icon" href="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20w_o%20text.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="featureSearch.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Top Header -->
        <header class="top-header">
            <div class="logo-container">
                <a href="documents.html" class="logo">
                    <img src="https://d2zcpib8duehag.cloudfront.net/Nova%20Docs%20w_o%20text.png" alt="Nova Docs">
                </a>
            </div>
            <div class="document-title">
                <input type="text" id="docTitle" placeholder="Untitled Document" class="title-input">
            </div>
            <div class="account-section">
                <button id="saveStatus" class="user-button">
                    <i class="fas fa-check"></i>
                    <span>All changes saved</span>
                </button>
                <div class="user-dropdown">
                    <button class="dropbtn" id="userMenuBtn">
                        <img src="" alt="Profile" class="profile-picture" id="userAvatar">
                    </button>
                    <div class="dropdown-content" id="userDropdown">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>
        </header>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-group">
                <button id="undoBtn" title="Undo"><i class="fas fa-undo"></i></button>
                <button id="redoBtn" title="Redo"><i class="fas fa-redo"></i></button>
            </div>
            
            <div class="toolbar-group">
                <div class="zoom-controls">
                    <button id="zoomOutBtn" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                    <select id="zoomLevel" title="Zoom Level">
                        <option value="0.5">50%</option>
                        <option value="0.75">75%</option>
                        <option value="1" selected>100%</option>
                        <option value="1.25">125%</option>
                        <option value="1.5">150%</option>
                        <option value="2">200%</option>
                        <option value="fit">Fit</option>
                        <option value="fill">Fill</option>
                    </select>
                    <button id="zoomInBtn" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                </div>
            </div>
            <div class="toolbar-group">
                <select title="Font" class="font-select" id="fontSelect">
                    <optgroup label="Serif Fonts">
                        <option value="'Times New Roman', Times, serif">Times New Roman</option>
                        <option value="'Georgia', serif">Georgia</option>
                        <option value="'Lora', Georgia, serif">Lora</option>
                        <option value="'Merriweather', Georgia, serif">Merriweather</option>
                    </optgroup>
                    <optgroup label="Sans-Serif Fonts">
                        <option value="'Arial', Helvetica, sans-serif">Arial</option>
                        <option value="'Inter', system-ui, sans-serif">Inter</option>
                    </optgroup>
                    <optgroup label="Monospace">
                        <option value="'Roboto Mono', monospace">Roboto Mono</option>
                    </optgroup>
                </select>
                <select title="Size" id="fontSize">
                    <option value="12">12</option>
                    <option value="14">14</option>
                    <option value="16" selected>16</option>
                    <option value="18">18</option>
                    <option value="20">20</option>
                    <option value="24">24</option>
                    <option value="28">28</option>
                    <option value="32">32</option>
                </select>
            </div>
            
            <div class="toolbar-group">
                <button id="boldBtn" title="Bold"><i class="fas fa-bold"></i></button>
                <button id="italicBtn" title="Italic"><i class="fas fa-italic"></i></button>
                <button id="underlineBtn" title="Underline"><i class="fas fa-underline"></i></button>
                <button id="strikeBtn" title="Strikethrough"><i class="fas fa-strikethrough"></i></button>
                <!-- Add new format buttons -->
                <input type="color" id="textColorBtn" title="Text Color" class="color-picker">
                <input type="color" id="highlightBtn" title="Highlight" class="color-picker" value="#ffeb3b">
                <button id="clearFormatBtn" title="Clear Formatting"><i class="fas fa-remove-format"></i></button>
            </div>

            <div class="toolbar-group">
                <button id="alignLeftBtn" title="Align Left"><i class="fas fa-align-left"></i></button>
                <button id="alignCenterBtn" title="Align Center"><i class="fas fa-align-center"></i></button>
                <button id="alignRightBtn" title="Align Right"><i class="fas fa-align-right"></i></button>
                <button id="alignJustifyBtn" title="Justify"><i class="fas fa-align-justify"></i></button>
            </div>

            <div class="toolbar-group toolbar-right">
                <button id="commentsBtn" title="Comments"><i class="fas fa-comments"></i></button>
                <button id="historyBtn" title="History"><i class="fas fa-history"></i></button>
                <button id="shareBtn" title="Share"><i class="fas fa-share-alt"></i></button>
                <div class="dropdown">
                    <button id="exportBtn" title="Export"><i class="fas fa-download"></i></button>
                    <div class="dropdown-content" id="exportDropdown">
                        <a href="#" data-format="pdf">Export as PDF</a>
                        <a href="#" data-format="word">Export as Word</a>
                        <a href="#" data-format="markdown">Export as Markdown</a>
                        <a href="#" data-format="rtf">Export as RTF</a>
                        <a href="#" data-format="html">Export as HTML</a>
                        <a href="#" data-format="txt">Export as Plain Text</a>
                    </div>
                </div>
                <button id="featureSearchBtn" title="Feature Search (Ctrl + .)" class="feature-search-btn">
                    <i class="fas fa-search"></i>
                    <span class="kbd-shortcut">Ctrl + .</span>
                </button>
            </div>
        </div>

        <!-- Editor Container -->
        <div class="editor-container">
            <div id="editor" contenteditable="true">
                <div class="page" data-page="1">
                    <h1>Untitled Document</h1>
                    <p>Start typing here...</p>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span class="page-indicator" id="pageIndicator">Page 1 of 1</span>
            <span id="wordCount">0 words</span>
            <span id="charCount">0 characters</span>
            <span id="lastSaved">Last saved: Just now</span>
        </div>

        <!-- Notifications Container -->
        <div class="notifications-container" id="notifications"></div>
    </div>

    <!-- Share Dialog -->
    <div class="dialog" id="shareDialog">
        <div class="dialog-content">
            <h3>Share Document</h3>
            
            <!-- Add shared users list -->
            <div class="shared-users">
                <h4>Shared with</h4>
                <div id="sharedUsersList" class="shared-users-list">
                    <!-- Populated by JavaScript -->
                </div>
            </div>

            <!-- Share options -->
            <div class="share-options">
                <div class="share-option">
                    <label>
                        <input type="radio" name="shareType" value="private" checked>
                        Share with specific people
                    </label>
                    <div class="share-emails">
                        <input type="text" id="shareEmails" placeholder="Enter email addresses (comma separated)">
                    </div>
                </div>
                <div class="share-option">
                    <label>
                        <input type="radio" name="shareType" value="public">
                        Anyone with the link can view
                    </label>
                </div>
                <div class="share-option">
                    <label>
                        <input type="checkbox" id="allowCopy" checked>
                        Allow viewers to copy content
                    </label>
                </div>
            </div>

            <div class="share-link" id="shareLinkContainer" style="display: none;">
                <input type="text" id="shareLink" readonly>
                <button id="copyLink"><i class="fas fa-copy"></i></button>
            </div>

            <div class="dialog-buttons">
                <button id="cancelShare">Cancel</button>
                <button id="confirmShare" class="primary">Share</button>
            </div>
        </div>

        <div id="embedContainer" style="display: none;">
            <h3>Embed Document</h3>
            <div class="embed-options">
                <label>
                    <input type="radio" name="embedSize" value="small"> Small
                </label>
                <label>
                    <input type="radio" name="embedSize" value="medium" checked> Medium
                </label>
                <label>
                    <input type="radio" name="embedSize" value="large"> Large
                </label>
                <label>
                    <input type="radio" name="embedSize" value="responsive"> Responsive
                </label>
            </div>
            <div class="embed-code-container">
                <textarea id="embedCode" readonly></textarea>
                <button id="copyEmbed" class="secondary-button">
                    <i class="fas fa-copy"></i> Copy Embed Code
                </button>
            </div>
        </div>
    </div>

    <!-- History Sidebar -->
    <div class="sidebar-panel" id="historyPanel">
        <div class="sidebar-header">
            <h3>Document History</h3>
            <button id="closeHistory" class="close-button">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="revision-list" id="revisionList">
            <!-- Populated by JavaScript -->
        </div>
        <div class="sidebar-footer">
            <button id="restoreVersion" class="primary-button" style="display: none;">
                Restore This Version
            </button>
        </div>
    </div>

    <!-- Astro Sidebar -->
    <div class="astro-sidebar" id="astroSidebar">
        <div class="astro-header">
            <h3><i class="fas fa-robot"></i> Astro AI</h3>
            <button id="closeAstro" class="close-button">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="astro-content">
            <div id="astroResponses"></div>
        </div>
        <div class="astro-footer">
            <span class="usage-count">
                Remaining uses: <span id="astroUsageCount">-</span>
            </span>
            <div class="astro-actions">
                <button id="astroTryAgain" class="astro-button">
                    <i class="fas fa-redo"></i> Try Again
                </button>
                <div class="astro-menu">
                    <button id="astroMoreActions" class="astro-button">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div class="astro-menu-content">
                        <button data-action="summarize">
                            <i class="fas fa-robot"></i> Summarize Text
                        </button>
                        <button data-action="expand">
                            <i class="fas fa-lightbulb"></i> Expand Selection
                        </button>
                        <button data-action="draft">
                            <i class="fas fa-pen-fancy"></i> Draft Content
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
    <script src="notifications.js"></script>
    <script type="module" src="astro.js"></script>
    <script src="exports.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/turndown@7.1.2/dist/turndown.min.js"></script>
    <script type="module" src="featureSearch.js"></script>
</body>
</html>

